<!DOCTYPE html>
<html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A personal blog of z217">
  <meta name="Author" content="z217">
  <meta name="keywords" content="hugo blog">
  <link rel="icon" type="image/x-icon" href=https://z217blog.cn/favicon.ico>
  <link rel="stylesheet" href=https://z217blog.cn/css/syntax.css>
  <link rel="stylesheet" href=https://z217blog.cn/css/style.css>
  <link rel="stylesheet" href=https://z217blog.cn/css/jquery.floatingscroll.css>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://kit.fontawesome.com/1b7478c139.js" crossorigin="anonymous"></script>
  <script src=https://z217blog.cn/js/jquery.floatingscroll.min.js></script>
  <title>z217&#39;s blog</title>
</head><script src=https://z217blog.cn/js/navbutton.js></script>

<body><aside id="sidenav">
    <header>
        
        <a href=https://z217blog.cn><img src="https://z217blog.cn/avatar.png" alt="avatar"></a>
        

        <a id="branding" href=https://z217blog.cn>
            
            z217&#39;s blog
            
        </a>
    </header>

    <nav>
        
        
        <a href="/" >
            <i class="fas fa-home fa-ms"></i>
            <span>首页</span>
        </a>
        
        
        <a href="/post/" >
            <i class="fas fa-keyboard fa-ms"></i>
            <span>文章</span>
        </a>
        
        
        <a href="/tags" >
            <i class="fas fa-tags fa-sm"></i>
            <span>标签</span>
        </a>
        
        
        <a href="/about" >
            <i class="fas fa-user fa-ms"></i>
            <span>关于</span>
        </a>
        
        
        <a href="https://github.com/z217"  target="_blank" >
            <i class="fab fa-github fa-ms"></i>
            <span>Github</span>
        </a>
        
        
        <a href="/index.xml" >
            <i class="fas fa-rss fa-sm"></i>
            <span>RSS</span>
        </a>
        
        
        <a href="/friend" >
            <i class="fas fa-map fa-sm"></i>
            <span>友链</span>
        </a>
        
    </nav>
</aside><main id="main">
        <a href="javascript:void(0)" id="closebtn" onclick="navToggle()"><i class="fas fa-bars fa-lg"></i></a>
        <div class="content">

<h1 id="title">数据库系统（3）：关系模型</h1>




<p>        在目前使用的数据处理软件中，<strong>关系数据库管理系统</strong> ( $Relational\ \ Database\ \ Management\ \ System$, $RDBMS$ ) 占据了统治地位。<code>RDBMS</code>基于关系数据模型。在关系模型中，所有数据逻辑上被组织成关系（表）结构。</p>
<h2 id="1-基本术语">1. 基本术语</h2>
<p>        关系模型基于数学中的<strong>关系</strong> ( $relation$ )。</p>
<h3 id="11-关系数据结构">1.1 关系数据结构</h3>
<h4 id="111-关系">1.1.1 关系</h4>
<p>        关系是由行和列组成的表。在关系模型中，用关系保存数据库所描述对象的信息，关系用二维表表示。用户主要接触的就是表，但这只限于逻辑结构，即外部层和概念层。对于物理结构，由于是通过多种存储结构实现的，因此并不适用。</p>
<h4 id="112-属性">1.1.2 属性</h4>
<p>        <strong>属性</strong> ( $Attribute$ ) 是关系中命名的列。在关系的二维表中，每一行对应一个单独的记录，每一列则对应一个属性。</p>
<h4 id="113-域">1.1.3 域</h4>
<p>        <strong>域</strong> ( $Domain$ ) 是一个或多个属性的取值集合，必须给每一个属性定义一个域。不同属性的域可以互不相同，也可以共用。通过使用域，用户可以集中定义属性的取值范围和含义。</p>
<h4 id="114-元组">1.1.4 元组</h4>
<p>        <strong>元组</strong> ( $Tuple$ ) 是关系中的行。关系的结构、域说明以及所有取值约束统称为关系的<strong>内涵</strong> ( $intension$ )。它通常是固定的，除非关系的意义改变，需要加入新的属性。元组的集合称为<strong>外延</strong> ( $extension$ ) /<strong>状态</strong> ( $state$ )，它经常发生改变。</p>
<h4 id="115-维数">1.1.5 维数</h4>
<p>        <strong>维数</strong> ( $Degree$ ) 是关系所包含的属性个数。只有一个属性的关系称为一元关系或者一元组，两个属性的关系称为二元关系，以此类推，$n$ 个属性的关系称为 $n$ 元组。维数是内含的性质之一。</p>
<h4 id="116-基数">1.1.6 基数</h4>
<p>        <strong>基数</strong> ( $Cardinality$ ) 是关系所包含的元组的个数。基数是外延的性质之一。</p>
<h4 id="117-关系数据库">1.1.7 关系数据库</h4>
<p>        关系数据库是具有不同关系名的规范化的关系的集合。</p>
<p>        事实上，关系模型的术语并不统一，下表为常见的关系术语的别名及其对应的正式术语。</p>
<div class="div-table" data-fl-scrolls><table>
<thead>
<tr>
<th style="text-align:center">正式术语</th>
<th style="text-align:center">可选术语</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">关系</td>
<td style="text-align:center">表、文件</td>
</tr>
<tr>
<td style="text-align:center">元组</td>
<td style="text-align:center">行、记录</td>
</tr>
<tr>
<td style="text-align:center">属性</td>
<td style="text-align:center">列、字段</td>
</tr>
</tbody>
</table></div>
<h3 id="12-数据库中的关系">1.2 数据库中的关系</h3>
<p>        <strong>关系模式</strong> ( $Relation\ \ schema$ ) 是用一组属性和域的名词对定义的具有名字的关系。设属性 $A_1$, $A_2$,&hellip;, $A_n$ 对应的域分别为 $D_1$, $A_2$,&hellip;, $A_n$，那么集合 {$A_1$: $D_1$, $A_2$: $D_2$,&hellip;, $A_n$: $D_n$} 就是一个关系模式。由关系模式 $S$ 定义的关系 $R$ 是一组从属性到域的映射。因此关系 $R$ 就是如下 $n$ 元组的集合：</p>
<div>
$$
(A_1:d_1,A_2:d_2,...,A_n:d_n),d_1\in{D_1},d_2\in{D_2},...,d_n\in{D_n}
$$
</div>
<p>        $n$ 元组的每个元素都由一个属性和该属性的一个取值组成。通常会把属性名作为列标题，元组作为行。关系中属性和元组对应的集合称为<strong>关系实例</strong> ( $relation\ \ instance$ )。<br>
        关系数据库也具有模式。<strong>关系数据库模式</strong> ( $Relational\ \ database\ \ schema$ ) 是关系模式的结合，在集合中每个关系都有不同的名字。</p>
<h3 id="13-关系的性质">1.3 关系的性质</h3>
<ol>
<li>在同一关系模式中，关系之间不能重名</li>
<li>关系的每一个单元格都包含一个原子（单个）值</li>
<li>关系中的属性不能重名</li>
<li>同一属性中的值都来自相同的域</li>
<li>关系中元组间互不相同</li>
<li>属性顺序并不重要</li>
<li>元组顺序也并不重要，但改变元组的顺序可能会影响访问效率</li>
</ol>
<h3 id="14-键">1.4 键</h3>
<p>        元组之间不会重复，因此可以通过一个或多个属性来唯一标识元组。</p>
<h4 id="141-超键">1.4.1 超键</h4>
<p>        <strong>超键</strong> ( $Superkey$ ) 是一个属性或者属性的集合，能唯一标识关系中的每个元组。但是超键中可能包含多余的属性。</p>
<h4 id="142-候选键">1.4.2 候选键</h4>
<p>        <strong>候选键</strong> ( $Candidate\ \ key$ ) 是超键，但是其任何真子集都不是超键。候选键是唯一标识每个元组的最小属性集合，具有如下性质：</p>
<ol>
<li><em>唯一性</em>，即可以唯一的标识每个元组</li>
<li><em>不可约性</em>，即每个真子集都不具有唯一性</li>
</ol>
<p>        一个关系可能有多个候选键。当一个键中包含多个属性时，就称为<strong>合成键</strong> ( $composite\ \ key$ )。</p>
<h4 id="143-主键">1.4.3 主键</h4>
<p>        <strong>主键</strong> ( $Primary\ \ key$ ) 是用于唯一标识关系中元组的候选键。一个关系可以有多个候选键，但这些候选键中只能选出一个作为主键，没有被选为主键的候选键称为<strong>可替换键</strong> ( $alternate\ \ key$ )。</p>
<h4 id="144-外键">1.4.4 外键</h4>
<p>        <strong>外键</strong> ( $Foreign\ \ key$ ) 是关系中与另一个关系的候选键相匹配的属性或者属性集合。</p>
<h2 id="2-完整性约束">2. 完整性约束</h2>
<p>        关系数据模型是数据模型的结构部分。数据模型还包括操作部分和完整性约束。在上述部分中我们谈到的<strong>域约束</strong> ( $domain\ \ constraint$ )，用于限定关系中属性的取值集合。此外还有<strong>实体完整性</strong> ( $entity\ \ integrity$ ) 和<strong>引用完整性</strong> ( $referential\ \ integrity$ )。其他的完整性约束还有<strong>多样性</strong> ( $multiplicity$ ) 和<strong>一般性约束</strong> ( $general\ \ constraint$ )。而在这之前，我们需要先了解<strong>空</strong> ( $null$ )。</p>
<h3 id="21-空">2.1 空</h3>
<p>        空代表对一个元组当前取值还不知道或者是不可用的属性值。空并不是一个值，只是没有值的一种表示。空可能会导致执行问题，因为关系模型是基于一阶谓词演算的，而谓词演算只支持 $true$ 和 $false$ 两个值，而如果要允许空存在，则需要采用多值逻辑。</p>
<h3 id="22-实体完整性">2.2 实体完整性</h3>
<p>        实体完整性是指在基本关系中主键的属性不能为空。主键是能唯一标识元组的最小属性集合。如果内部存在空，就说明并不是所有属性都是唯一标识元组所必须的。这与主键的定义相悖。</p>
<h3 id="23-引用完整性">2.3 引用完整性</h3>
<p>        引用完整性是指如果关系中存在外键，则它的值与主关系中某个元组的候选键取值相等，或者全部为空。</p>
<h3 id="24-一般性约束">2.4 一般性约束</h3>
<p>        一般性约束是由用户或者管理员指定的附加性规则，用于在某些方面进行约束。例如为某个属性的值添加上限等。</p>
<h2 id="3-视图">3. 视图</h2>
<p>        关系模型中的视图与<code>ANSI-SPARC</code>三层结构中的视图有所不同，它不完全是用户看到的外部模型，而是一个<strong>虚</strong> ( $virtual$ ) /<strong>导出</strong> ( $derived$ ) <strong>关系</strong>，即无需单独存在，在必要时从一个或多个基本关系中动态导出。一个外部模型可由基本关系（概念级）和基本关系的导出视图组成。</p>
<h3 id="31-术语">3.1 术语</h3>
<p>        <strong>基本关系</strong> ( $Base\ \ relation$ ) 是一个与概念模式中的实体相对应的具有名字的关系，它的元组都存储在数据库的物理结构中。根据基本关系，我们可以定义视图。<strong>视图</strong>是对一个或多个基本关系进行关系操作得到的动态结果，是一个无需存在于数据库中，但却可以在需要时生成的虚关系。视图不存在存储器中，但其定义存储在系统目录中。对视图所做出的任何操作都会被自动转换称为对导出其的关系的操作。又由于视图是动态的，因此操作可以立即反映到基本关系上。</p>
<h3 id="32-作用">3.2 作用</h3>
<ol>
<li>对特定用户只显示特定的信息，提供了一个强大灵活的安全机制</li>
<li>允许用户自定义访问方法</li>
<li>简化复杂操作</li>
</ol>
<p>        视图的这些作用也提供了<em>逻辑数据独立性</em>。视图的引入也使我们能够进行概念模式的重构。只要通过重新定义视图，就可以在不影响到用户的情况下重组关系。</p>
<h3 id="33-更新">3.3 更新</h3>
<p>        如上所说，对视图所进行的操作会立即反映到关系中。同样的，对关系所进行的操作也会立即反映到视图中。但是这种方法存在约束：</p>
<ol>
<li>如果视图是由一个基本关系的简单查询生成，并且包含了主键或者候选键，那么就可以对其进行更新操作</li>
<li>如果视图涉及多个基本关系，那么就不可以对其进行更新操作</li>
<li>如果视图的生成中涉及了聚集或者分组操作，那么就不可以对其进行更新</li>
</ol>

<script src=https://z217blog.cn/js/toc.js></script>

<div>
    <a href="javascript:void(0);" id="tocbtn"><i class="fas fa-bars fa-lg"></i></a>
    <div id="sidetoc">
        <header>
            <h4>数据库系统（3）：关系模型</h4>
        </header>
        <nav id="TableOfContents">
            <ul></ul>
        </nav>
    </div>
    <script>
        isTocOpen = true;
    </script>
</div>


<div class="nav-next-prev">
    <div class="nav-prev">
        
        <a href="https://z217blog.cn/post/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F2%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83/"><i class="fas fa-chevron-left"></i></a>
        
    </div>
    <a class="nav-top" href="#">回到顶部</i></a>
    <div class="nav-next">
        
        <a href="https://z217blog.cn/post/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F4%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0/"><i class="fas fa-chevron-right"></i></a>
        
    </div>
</div>
<script type="text/javascript">
    if (isTocOpen) tocInit();
</script>


        </div><footer>
    <div class="footer-content">
        
        <div class="contact-info">
            
            <div class="footer-github">
                <i class="fab fa-github fa-ms"></i> <a target="_blank" href="https://github.com/z217">github.com/z217</a>
            </div>
            
            
            <div class="footer-mail">
                <i class="far fa-envelope"></i> <a href="mailto:mailto:zihan.zhouchn@outlook.com">mailto:zihan.zhouchn@outlook.com</a> </div>
            
            
        </div>
        
        
        <p class="copyright meta">Copyright © 2020–2022, z217 and the hugo authors, all rights reserved. Theme: <a target="_blank"
                href="https://github.com/ahmedsaadxyzz/npq-hugo">npq-hugo</a></p>
        
    </div>
</footer>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [
                ['$', '$'],
                ['\\(', '\\)']
            ],
            displayMath: [
                ['$$', '$$'],
                ['\[\[', '\]\]']
            ],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: {
                    autoNumber: "AMS"
                },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });

    MathJax.Hub.Queue(function () {
        let all = MathJax.Hub.getAllJax(),
            i;
        
        for (i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
</main>
</body>

</html>